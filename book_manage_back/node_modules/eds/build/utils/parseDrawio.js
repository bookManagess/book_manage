const atob = require('atob');
const btoa = require('btoa');
const pako = require('pako');

function bytesToString(a) {
	for (var b = Array(a.length), e = 0; e < a.length; e++) b[e] = String.fromCharCode(a[e]);
	return b.join("")
};

function zapGremlins(a) {
	for (var b = [], e = 0; e < a.length; e++) {
		var d = a.charCodeAt(e);
		(32 <= d || 9 == d || 10 == d || 13 == d) && b.push(a.charAt(e))
	}
	return b.join("")
};

module.exports.decompress = function decompress(a) {
	if (null == a || 0 == a.length) return a;
	return zapGremlins(decodeURIComponent(bytesToString(pako.inflateRaw(atob(a)))))
};

module.exports.compress = function (a) {
	if (null == a || 0 == a.length) return a;
	return btoa(bytesToString(pako.deflateRaw(encodeURIComponent(a))))
};
