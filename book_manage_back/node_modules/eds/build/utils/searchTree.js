const _ = require('lodash');
const chalk = require('chalk');

module.exports = function searchTree(obj, searchid) {
  let result;
  function recursiveChildren(obj, searchid){
    const children = obj.children;
    if (children) {
      _.forEach(children, (value, index) => {
        if (searchid === value.id) {
					if (!result) result = value;
					else {
						console.log(chalk.red('duplicate values find please check tree without duplicate IDs'));
					}
          return false;
        } else {
          recursiveChildren(value, searchid);
        }
      });
    }
  }
  // check root id
  if (searchid === obj.id) return obj;

  // check children id
  recursiveChildren(obj, searchid);
  return result;
};