const _ = require('lodash');

module.exports = function mergeGroupsItems(groups) {
  return _.map(groups, function(group) {
    const merged = {};
    _.forEach(group, function(obj) {
      _.forIn(obj, function(value, key) {
        if (!merged[key]) {
          merged[key] = [value];
        } else {
          merged[key].push(value);
        }
        merged[key] = _.uniq(merged[key]);
      });
    });
    return merged;
  })
};