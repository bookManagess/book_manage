const _ = require('lodash');

module.exports = function getSettings(versions, dir) {
  const obj = {};
  versions.forEach((version) => {
    obj[version] = require(`../../src/${version}/${dir}`);
    _.each(require.cache[require.resolve(`../../src/${version}/${dir}`)].children, (child) => {
      delete require.cache[child.id];
    });
    delete require.cache[require.resolve(`../../src/${version}/${dir}`)];
  });
  return obj;
};
